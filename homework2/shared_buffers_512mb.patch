--- a/src/backend/utils/misc/guc.c
+++ b/src/backend/utils/misc/guc.c
@@ -4235,6 +4235,17 @@ InitializeGUCOptions(void)
 	 */
 	Assert(guc_variables_hash == NULL);
 
+	/*
+	 * 大作业2修改：自动设置 shared_buffers 默认值为 512MB
+	 * 当配置文件中没有明确指定 shared_buffers 时，使用 512MB 而不是默认的 128MB
+	 * 512MB = 65536 个 8KB 页面 (512 * 1024 * 1024 / 8192 = 65536)
+	 */
+	if (NBuffers <= 1024) {  /* 检查是否为原始默认值 */
+		NBuffers = 65536;    /* 设置为 512MB */
+		elog(LOG, "大作业2：自动设置 shared_buffers = 512MB (当配置文件未指定时)");
+	}
+	/* 大作业2修改结束 */
+
 	size = num_guc_variables + num_guc_variables / 4;
 	guc_variables_hash = hash_create("GUC variables",
 									 size,
